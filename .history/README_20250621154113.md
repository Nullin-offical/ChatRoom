# Real-Time ChatRoom Application

A fully functional web-based real-time chatroom built with **Supabase**, **HTML**, **CSS**, **JavaScript**, and **Bootstrap 5**.

## ğŸš€ Features

### Authentication System

- âœ… User registration with email and password
- âœ… User login/logout functionality
- âœ… Session management with Supabase Auth
- âœ… Protected routes for authenticated users

### User Dashboard

- âœ… User profile information display
- âœ… Message statistics
- âœ… Recent activity tracking
- âœ… Quick action buttons

### Real-Time Chat

- âœ… Live messaging using Supabase Realtime
- âœ… Message history with timestamps
- âœ… User identification and display
- âœ… Auto-scroll to latest messages
- âœ… Character count and input validation
- âœ… Clear chat functionality

### Admin Panel

- âœ… User management (view, promote to admin, delete)
- âœ… Message management (view, delete, clear all)
- âœ… Admin statistics dashboard
- âœ… Search and filter functionality
- âœ… Admin-only access control

## ğŸ› ï¸ Tech Stack

- **Frontend**: HTML5, CSS3, JavaScript (ES6+), Bootstrap 5
- **Backend**: Supabase (PostgreSQL Database)
- **Authentication**: Supabase Auth
- **Real-time**: Supabase Realtime Subscriptions
- **Icons**: Font Awesome 6
- **Hosting**: Compatible with Vercel, Netlify, or any static hosting

## ğŸ“‹ Prerequisites

Before running this application, you need:

1. **Supabase Account**: Create a free account at [supabase.com](https://supabase.com)
2. **Web Browser**: Modern browser with JavaScript enabled
3. **Local Server**: For development (optional but recommended)

## ğŸ—„ï¸ Database Setup

### Step 1: Create Supabase Project

1. Go to [supabase.com](https://supabase.com) and create a new project
2. Note down your **Project URL** and **API Key** (anon/public key)

### Step 2: Database Schema

Run the following SQL commands in your Supabase SQL Editor:

```sql
-- Create profiles table
CREATE TABLE profiles (
    user_id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
    username VARCHAR(50) NOT NULL,
    is_admin BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create messages table
CREATE TABLE messages (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
    content TEXT NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Enable Row Level Security (RLS)
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE messages ENABLE ROW LEVEL SECURITY;

-- Create RLS policies for profiles
CREATE POLICY "Users can view all profiles" ON profiles
    FOR SELECT USING (true);

CREATE POLICY "Users can update their own profile" ON profiles
    FOR UPDATE USING (auth.uid() = user_id);

CREATE POLICY "Users can insert their own profile" ON profiles
    FOR INSERT WITH CHECK (auth.uid() = user_id);

-- Create RLS policies for messages
CREATE POLICY "Users can view all messages" ON messages
    FOR SELECT USING (true);

CREATE POLICY "Users can insert their own messages" ON messages
    FOR INSERT WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Admins can delete any message" ON messages
    FOR DELETE USING (
        EXISTS (
            SELECT 1 FROM profiles
            WHERE user_id = auth.uid() AND is_admin = true
        )
    );

-- Create function to handle new user registration
CREATE OR REPLACE FUNCTION handle_new_user()
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO profiles (user_id, username)
    VALUES (NEW.id, COALESCE(NEW.raw_user_meta_data->>'username', 'User'));
    RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Create trigger for new user registration
CREATE TRIGGER on_auth_user_created
    AFTER INSERT ON auth.users
    FOR EACH ROW EXECUTE FUNCTION handle_new_user();
```

### Step 3: Enable Realtime

1. Go to your Supabase Dashboard
2. Navigate to **Database** â†’ **Replication**
3. Enable realtime for the `messages` table

## âš™ï¸ Configuration

### Step 1: Update Supabase Credentials

Open `js/supabaseClient.js` and update the credentials:

```javascript
const SUPABASE_URL = "YOUR_SUPABASE_PROJECT_URL";
const SUPABASE_ANON_KEY = "YOUR_SUPABASE_ANON_KEY";
```

### Step 2: Create First Admin User

After setting up the database, you'll need to manually create the first admin user:

1. Register a new user through the application
2. Go to your Supabase Dashboard â†’ **Table Editor** â†’ **profiles**
3. Find your user and set `is_admin` to `true`

## ğŸš€ Running the Application

### Option 1: Local Development Server

```bash
# Using Python (if installed)
python -m http.server 8000

# Using Node.js (if installed)
npx serve .

# Using PHP (if installed)
php -S localhost:8000
```

Then open `http://localhost:8000` in your browser.

### Option 2: Direct File Access

Simply open `index.html` in your web browser (some features may not work due to CORS restrictions).

### Option 3: Deploy to Vercel/Netlify

1. Push your code to GitHub
2. Connect your repository to Vercel or Netlify
3. Deploy automatically

## ğŸ“ Project Structure

```
chatRoom/
â”œâ”€â”€ index.html              # Landing page
â”œâ”€â”€ login.html              # Login page
â”œâ”€â”€ register.html           # Registration page
â”œâ”€â”€ dashboard.html          # User dashboard
â”œâ”€â”€ chat.html              # Main chat interface
â”œâ”€â”€ admin.html             # Admin panel
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css          # Custom styles
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ supabaseClient.js  # Supabase configuration
â”‚   â”œâ”€â”€ auth.js            # Authentication logic
â”‚   â”œâ”€â”€ navigation.js      # Navigation and routing
â”‚   â”œâ”€â”€ dashboard.js       # Dashboard functionality
â”‚   â”œâ”€â”€ chat.js           # Chat functionality
â”‚   â””â”€â”€ admin.js          # Admin panel functionality
â””â”€â”€ README.md              # This file
```

## ğŸ”§ Customization

### Styling

- Modify `css/style.css` to customize the appearance
- Update Bootstrap classes in HTML files
- Change color scheme by modifying CSS variables

### Features

- Add new chat rooms by creating additional tables
- Implement file uploads using Supabase Storage
- Add user avatars and profile pictures
- Implement message reactions and emojis

### Security

- Add additional RLS policies for enhanced security
- Implement rate limiting for message sending
- Add content moderation features

## ğŸ› Troubleshooting

### Common Issues

1. **"Supabase client not initialized"**

   - Check your Supabase credentials in `js/supabaseClient.js`
   - Ensure the Supabase CDN is loaded before your scripts

2. **"Authentication failed"**

   - Verify your Supabase project settings
   - Check if email confirmation is required in your Supabase settings

3. **"Real-time not working"**

   - Ensure realtime is enabled for the `messages` table
   - Check browser console for connection errors

4. **"Database errors"**
   - Verify your SQL schema is correctly applied
   - Check RLS policies are properly configured

### Debug Mode

Enable debug logging by adding this to your browser console:

```javascript
localStorage.setItem("debug", "true");
```

## ğŸ“ License

This project is open source and available under the [MIT License](LICENSE).

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## ğŸ“ Support

If you encounter any issues or have questions:

1. Check the troubleshooting section above
2. Review the Supabase documentation
3. Open an issue on GitHub

## ğŸ¯ Roadmap

- [ ] User avatars and profile pictures
- [ ] File and image sharing
- [ ] Message reactions and emojis
- [ ] Multiple chat rooms
- [ ] User typing indicators
- [ ] Message search functionality
- [ ] Push notifications
- [ ] Mobile app version

---

**Built with â¤ï¸ using Supabase and modern web technologies**
